<!doctype html><html lang="pl" class="no-js"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="W naszym systemie mieliśmy już wiele różnych metryk i alertów. Niektóre z nich były absolutnie uzasadnione, inne jednak okazywały się mniej istotne. Wprowadzenie zmian i rezygnacja z części metryk stanowiło wyzwanie, ponieważ część z nich była wymagana przez organizację, a inne były po prostu przyzwyczajeniem inżynierów..."><meta name="author" content="Rafał Schmidt"><link rel="canonical" href="https://rafalschmidt.com/biznesowe-sla-w-praktyce/"><link rel="icon" href="../assets/images/favicon-32x32.png"><meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.18"><title>Biznesowe SLA w praktyce | Dev's Pills</title><link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../assets/stylesheets/variables.db6d68.min.css"><link rel="stylesheet" href="../assets/stylesheets/main-overrides.73a211.min.css"><link rel="stylesheet" href="../assets/stylesheets/page.6893a2.min.css"><link rel="stylesheet" href="../assets/stylesheets/home.6be40c.min.css"><link rel="stylesheet" href="../assets/stylesheets/custom-blog.ce1304.min.css"><link rel="stylesheet" href="../assets/stylesheets/cookies.ac46bd.min.css"><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta name="robots" content="index, follow"><link rel="apple-touch-icon" sizes="180x180" href="../assets/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon-16x16.png"><meta property="og:type" content="article"><meta property="og:title" content="Biznesowe SLA w praktyce | Dev's Pills"><meta name="twitter:title" content="Biznesowe SLA w praktyce | Dev's Pills"><meta property="og:description" content="W naszym systemie mieliśmy już wiele różnych metryk i alertów. Niektóre z nich były absolutnie uzasadnione, inne jednak okazywały się mniej istotne. Wprowadzenie zmian i rezygnacja z części metryk stanowiło wyzwanie, ponieważ część z nich była wymagana przez organizację, a inne były po prostu przyzwyczajeniem inżynierów..."><meta name="twitter:description" content="W naszym systemie mieliśmy już wiele różnych metryk i alertów. Niektóre z nich były absolutnie uzasadnione, inne jednak okazywały się mniej istotne. Wprowadzenie zmian i rezygnacja z części metryk stanowiło wyzwanie, ponieważ część z nich była wymagana przez organizację, a inne były po prostu przyzwyczajeniem inżynierów..."><meta property="og:url" content="https://rafalschmidt.com/biznesowe-sla-w-praktyce/"><meta name="twitter:card" content="summary"><meta property="og:image" content="../static/biznesowe-sla-w-praktyce/hero.jpg"><meta name="twitter:image" content="../static/biznesowe-sla-w-praktyce/hero.jpg"><link rel="preload" as="image" href="../static/biznesowe-sla-w-praktyce/hero.jpg"><meta itemprop="keywords" content="sla,organizacja"><meta name="keywords" content="sla,organizacja"><script src="https://cdn.jsdelivr.net/gh/manucaralmo/GlowCookies@3.1.7/src/glowCookies.min.js"></script><script>
      glowCookies.start('pl', { 
          style: 1,
          position: 'left',
          analytics: 'G-YM5ZY68GZJ', 
          policyLink: 'https://policies.google.com/technologies/cookies?hl=pl-PL', //  'https://policies.google.com/technologies/partner-sites?hl=pl-PL' and https://marketingplatform.google.com/about/analytics/terms/pl/
          bannerDescription: 'Ta strona używa plików cookie od zewnętrznych dostawców w celu analizy ruchu.',
          bannerLinkText: 'Więcej o plikach cookie.',
          bannerBackground: '#ffffff',
          bannerColor: '#000000',
          acceptBtnText: 'Zaakceptuj',
          acceptBtnColor: '#ffffff',
          acceptBtnBackground: '#000000',
          rejectBtnText: 'Odrzuć',
          rejectBtnBackground: '#E8E8E8',
          rejectBtnColor: '#636363',
          manageText: ' ',
          manageBackground: 'transparent',
          manageColor: '#000000',
      });
  </script></head> <body dir="ltr"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#co-tak-naprawde-optymalizujemy" class="md-skip"> Przejdź do treści </a> </div> <div data-md-component="announce"> </div> <header class="md-header" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="Nagłówek"> <a href="/" title="Dev's Pills" class="md-header__button md-logo" aria-label="Dev's Pills" data-md-component="logo"> Dev's Pills </a> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="/" class="md-nav__link">Wpisy</a> </li> <li class="md-nav__item"> <a href="https://linkedin.com/in/rafalschmidt/" target="_blank" class="md-nav__link">LinkedIn</a> </li> <li class="md-nav__item"> <a href="../static/cv.pdf" target="_blank" class="md-nav__link">CV</a> </li> </ul> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-content" data-md-component="content"> <img class="page-hero" width="100%" height="auto" src="../static/biznesowe-sla-w-praktyce/hero.jpg" alt="hero"> <article class="md-content__inner md-typeset"> <nav class="md-tags"> <a href="/tagi/#sla" class="md-tag"> #sla</a> <a href="/tagi/#organizacja" class="md-tag"> #organizacja</a> </nav> <h1>Biznesowe SLA w praktyce</h1> <p>Pracując jako inżynier w dużej organizacji, miałem do czynienia zarówno z metrykami biznesowymi, jak i technicznymi. Monitorowaliśmy procesy biznesowe, takie jak przykładowo liczba zakończonych płatności, czy wypełnione formularze, za pomocą <a href="https://victoriametrics.com/">Victoria Metrics</a> i dashboardów w <a href="https://grafana.com/">Grafanie</a>. Mimo że te dane były dostępne, brakowało nam zrozumienia, co dokładnie się stanie, gdy osiągniemy krytyczne progi – jakie będą rzeczywiste konsekwencje dla produktu? Równocześnie skupiałem się na technicznych wskaźnikach, takich jak stosunek nieudanych zapytań do udanych, co sprawiało, że traciliśmy z oczu pełen obraz wpływu tych metryk na funkcjonowanie biznesu.</p> <p>Prawdziwy przełom nastąpił, gdy rozpocząłem współpracę z jednym z bardziej doświadczonych inżynierów w firmie nad SLO. Zauważył, że metryki techniczne, na których opieraliśmy naszą codzienną pracę, nie zawsze odzwierciedlały to, co rzeczywiście jest ważne dla produktu. Razem doszliśmy do wniosku, że nadszedł czas, aby spojrzeć na metryki z innej perspektywy – z punktu widzenia biznesu.</p> <h2 id="co-tak-naprawde-optymalizujemy">Co tak naprawdę optymalizujemy?<a class="headerlink" href="#co-tak-naprawde-optymalizujemy" title="Permanent link">&para;</a></h2> <p>Kiedy podjęliśmy się tego wyzwania, miałem w głowie dwie kluczowe perspektywy (kolejność przypadkowa):</p> <ol> <li> <p><strong>Dobrostan inżynierów</strong> – Zbierając feedback od kolegów z zespołu, którzy pełnili dyżury, zauważyłem, że choć technicznie uzasadnione alerty, nie zawsze wymagały natychmiastowej interwencji. Zdażało się, że inżynierowie spędzali nieprzespane noce na rozwiązywaniu problemów, które mogły poczekać do rana. Zacząłem się zastanawiać – czy wszystkie te alarmy są naprawdę konieczne? Czy możemy znaleźć sposób, aby lepiej tym zarządzać?</p> </li> <li> <p><strong>Koszty i efektywność biznesu</strong> – Zrozumienie, kiedy interwencja jest naprawdę potrzebna, a kiedy można poczekać, jest kluczowe nie tylko dla dobrostanu zespołu, ale również dla wyników finansowych produktu. Nasze procesy często ulegają zmianom z uwagi na etap, w którym jest projekt, zwłaszcza w kontekście kampanii marketingowych, co sprawia, że trudno jest ustalić stałe progi do interwencji. Moim celem stało się znalezienie odpowiedzi na dwa kluczowe pytania:</p> <ul> <li> <p>Jak duży spadek konwersji powinien wywołać natychmiastową reakcję dyżurnego? Wspólnie z zespołem ustaliliśmy, że musimy uwzględnić różnice między dniami roboczymi a weekendami, a także święta. Opcjonalnie braliśmy pod uwagę wpływ kampanii marketingowych.</p> </li> <li> <p>Kiedy powinniśmy wezwać dyżurnego do awarii, a kiedy dodatkowo rozważyć czasowe wyłączenie usługi? Musieliśmy uwzględnić krytyczność procesu na podstawie kluczowych wskaźników (KPI), z których rozliczani są menedżerowie produktów. Ważne było także zrozumienie, jak efektywnie potrafimy obsługiwać problemy – czy lepiej wydłużyć proces, czy całkowicie przerwać go i kazać zacząć od nowa? Zastanawialiśmy się także, czy klienci wrócą, jeśli przerwiemy im proces w połowie, lub jeśli zablokujemy im dostęp.</p> </li> </ul> </li> </ol> <p>Aby odpowiedzieć na te pytania, zorganizowaliśmy serię warsztatów z zespołem biznesowym. To pozwoliło nam lepiej zrozumieć oczekiwania i ograniczenia, które musimy brać pod uwagę.</p> <h2 id="inicjatywy">Inicjatywy<a class="headerlink" href="#inicjatywy" title="Permanent link">&para;</a></h2> <p>Zrozumienie tych dwóch perspektyw – dobrostanu inżynierów oraz kosztów – pomogło nam wyznaczyć kierunki działania. Wspólnie opracowaliśmy plan, który podzieliliśmy na kilka etapów:</p> <ol> <li> <p><strong>Przegląd miar (metryk i alertowania)</strong> – Postanowiliśmy, że naszym priorytetem będzie jak najszybsze przestawienie się na metryki biznesowe. To, że system wykrywa błąd techniczny, nie zawsze oznacza, że klient napotkał problem. Podzieliliśmy metryki na biznesowe i techniczne, a także przeanalizowaliśmy, które z nich można wyciszyć, aby uniknąć niepotrzebnych alarmów. Ważne było również zrozumienie, co w kontekście prawa oznacza „dokonać wszelkich starań”, na przykład, czy brak dostarczenia maila z umową w niedzielę jest naruszeniem regulacji.</p> </li> <li> <p><strong>Wyznaczenie krytyczności komponentów (component criticality)</strong> – Projekt urósł do rozmiarów, w których nie mogliśmy już traktować wszystkich procesów biznesowych jednakowo. Musieliśmy podzielić je na kategorie według ich krytyczności, aby zapewnić odpowiednią jakość działania. Skategoryzowaliśmy metryki według ich ważności – od krytycznych po wspierające, i dostosowaliśmy je do różnych dni tygodnia i godzin pracy.</p> </li> <li> <p><strong>Zarządzanie niedostępnością (handling unavailability)</strong> – Przygotowaliśmy polityki eskalacyjne dla większości zewnętrznych partnerów, a także procedury działania w ramach incydentów. Naszym celem było również stworzenie jednego, przejrzystego widoku, który pozwalałby monitorować najważniejsze wskaźniki na jednym ekranie. Przepracowaliśmy definicje awarii i niedostępności, aby lepiej zrozumieć, co naprawdę wpływa na użytkowników i biznes.</p> </li> <li> <p><strong>Tworzenie raportu SLA</strong> – Wybraliśmy kluczowe procesy, które miały największy wpływ na wyniki produktu, i przypisaliśmy im metryki. Wprowadzenie narzędzi do centralizowanego raportowania incydentów pozwoliło nam lepiej śledzić przyczyny problemów i określać, kiedy spadki SLA były wynikiem naszych błędów, a kiedy były winą dostawców. Dzięki temu możemy podejmować bardziej świadome decyzje dotyczące dalszej współpracy z dostawcami oraz optymalizować umowy.</p> </li> </ol> <p>Przejdźmy teraz przez poszczególne inicjatywy.</p> <h2 id="1-przeglad-miar-sli">1. Przegląd miar - SLI<a class="headerlink" href="#1-przeglad-miar-sli" title="Permanent link">&para;</a></h2> <p>W naszym systemie mieliśmy już wiele różnych metryk i alertów. Niektóre z nich były absolutnie uzasadnione, inne jednak okazywały się mniej istotne. Wprowadzenie zmian i rezygnacja z części metryk stanowiło wyzwanie, ponieważ część z nich była wymagana przez organizację, a inne były po prostu przyzwyczajeniem inżynierów. Aby móc zrezygnować z niektórych, musieliśmy wykazać, że potrafimy je zastąpić bardziej efektywnymi wskaźnikami.</p> <p><span style="float:right;width:32%;margin:0.4em 0 0.4em 0.4em"><img alt src="../static/biznesowe-sla-w-praktyce/metrics.jpg"></span></p> <p>Rozpoczynając porządkowanie metryk, podzieliliśmy je na dwie główne kategorie:</p> <p><strong>Business Metrics</strong></p> <ul> <li> <p><strong>Process</strong>: onboarding, płatność, operacje itp.</p> </li> <li> <p><strong>Kind</strong>: Typ metryki, np. niski poziom (low), problem, awaria (failure), spadek (drop) itp.</p> </li> </ul> <p>Naszym celem było skoncentrowanie się na metrykach jak konwersja czy spadek wartości poniżej określonego progu. Wprowadziliśmy kategoryzację metryk na poziomie procesów. Dodatkowo, zaczęliśmy eksperymentować z różnymi metodami, takimi jak <a href="https://pl.wikipedia.org/wiki/Odchylenie_standardowe">odchylenia standardowe</a>, <a href="https://en.wikipedia.org/wiki/Standard_score">współczynnik z-score (standard)</a> oraz <a href="https://pl.wikipedia.org/wiki/Wahania_sezonowe">analiza sezonowości</a>. W sensownych oknach czasowych, odpowiednio dostosowanych do specyfiki procesów, tworzyliśmy metryki konwersji na podstawie ruchu. Ruch ten – poza kampaniami marketingowymi – jest dość przewidywalny, a my wiedzieliśmy, że w ciągu dnia nigdy nie spada poniżej określonego minimum</p> <p><strong>Technical Metrics</strong></p> <ul> <li> <p><strong>Type</strong>: zapytania, zasoby (compute, bazy itd), partnerzy/dostawcy, logi, platforma, metryki customowe itp.</p> </li> <li> <p><strong>Kind</strong>: Rodzaj problemu, np. błąd (error), degradacja (degraded), zbyt duża liczba (too many), brak dostępności (downtime), niski poziom (low) itp.</p> </li> </ul> <p>Te metryki były związane między innymi z degradacją naszej infrastruktury, np. spadkiem wydajności CosmosDB, Service Bus, SQL Servera itp. Obejmowały także restarty serwisów związane z OOM, niedostępnością usług zewnętrznych, czy rosnącą liczbą krytycznych logów. Choć te metryki są bardzo wartościowe, pojawia się pytanie, czy zawsze wpływają na nasz biznes na tyle, by wymagały natychmiastowej interwencji? Część procesów jest asynchroniczna i często sama naprawia się po kilku ponowieniach.</p> <p>Przykładowe nazwy metryk według tej konwencji to:</p> <ul> <li> <p><code>business_onboarding_low</code></p> </li> <li> <p><code>business_payment_method_not_available</code></p> </li> <li> <p><code>business_payment_drop</code></p> </li> <li> <p><code>technical_request_api_stability_low</code></p> </li> <li> <p><code>technical_resource_cosmos_performance_degraded</code></p> </li> <li> <p><code>technical_k8s_oom_high</code></p> </li> </ul> <p>Jedną z takich technicznych metryk było API stability, które nie mogło spaść poniżej 99,9%. W przypadku nowego produktu, z relatywnie niskim ruchem, zwłaszcza w nocy, mogło to prowadzić do niepotrzebnego alarmowania. Dochodziło do sytuacji, w których już 15 nieudanych zapytań na 15 000 uruchamiało alarm. Problem tkwił w tym, że system badał wszystkie zapytania, zamiast uwzględniać tylko unique users. Taka metryka ma sens jako wsparcie, ale tylko przy dużym ruchu. Dodatkowo, monitorowanie oparte było na 24-godzinnych oknach, co sprawiało, że endpointy, które były rzadko używane, mogły generować alerty przez długi czas, zanim wskaźniki wróciły do normy. Często były to błędy przejściowe (transient), timeouty itp., które nie mogły być naprawione podczas dyżuru.</p> <p>Mieliśmy trzy możliwości:</p> <ol> <li> <p>Poluzowanie samej metryki, np. poprzez zmianę progu procentowego lub skrócenie okna czasowego z 24h na 1h.</p> </li> <li> <p>Ustawienie niższego progu, np. wykluczającego godziny nocne.</p> </li> <li> <p>Całkowite przejście na metryki biznesowe, które odzwierciedlają rzeczywiste problemy użytkowników.</p> </li> </ol> <p>Wybraliśmy opcję skrócenia okna do 1h oraz ustawienie minimalnego progu, co pozwoliło nam zachować wysoką niezawodność usług w godzinach szczytu, jednocześnie redukując zbędne alerty w okresach niskiego ruchu. W miarę doskonalenia naszej strategii alertowania, rozważymy całkowite wyciszenie tej metryki, jeśli okaże się, że wszystkie krytyczne przypadki biznesowe są odpowiednio uwzględnione, a nasze obecne podejście przynosi oczekiwane rezultaty.</p> <h2 id="2-wyznaczenie-krytycznosci-procesow">2. Wyznaczenie krytyczności procesów<a class="headerlink" href="#2-wyznaczenie-krytycznosci-procesow" title="Permanent link">&para;</a></h2> <p>Bez wyznaczenia krytyczności, dalsze kroki, takie jak obsługa niedostępności, tracą sens. Obserwując, jak inne firmy radzą sobie z tym, postanowiliśmy pójść ich śladem i wprowadziliśmy cztery poziomy krytyczności procesów.</p> <p><strong>Jak klasyfikujemy procesy?</strong></p> <p>Procesy zostały podzielone na cztery poziomy krytyczności:</p> <ol> <li> <p><strong>Krytyczny (Critical)</strong>: Procesy niezbędne do funkcjonowania produktu i ochrony jego reputacji. Wymagają szybkiej reakcji i przywrócenia działania w ciągu kilku godzin (najczęściej 1-2 godziny), zarówno w dni robocze, jak i weekendy.</p> </li> <li> <p><strong>Ważny (Important)</strong>: Procesy, które mają umiarkowany wpływ na interakcje z klientami oraz wewnętrzne operacje.</p> <p><span style="float:right;width:32%;margin:0.4em 0 0.4em 0.4em"><img alt src="../static/biznesowe-sla-w-praktyce/criticality.jpg"></span></p> <p>Wymagają naprawy w ciągu kilku godzin (zwykle 3-6 godzin), zarówno w dni robocze, jak i weekendy, ale czas reakcji może być bardziej elastyczny niż w przypadku procesów krytycznych.</p> </li> <li> <p><strong>Standardowy (Standard)</strong>: Procesy o mniejszym wpływie na klientów, gdzie opóźnienia w przywróceniu działania są akceptowalne i mogą potrwać kilka dni. Naprawa takich procesów odbywa się wyłącznie w dni robocze, w godzinach pracy. Przykłady to systemy do wewnętrznego raportowania.</p> </li> <li> <p><strong>Wspierający (Supporting)</strong>: Procesy o minimalnym wpływie na działanie produktu. Nie wymagają natychmiastowej reakcji i mogą być naprawiane w dni robocze, w standardowych godzinach pracy. Obejmuje to np. systemy archiwizacji danych.</p> </li> </ol> <p>Po ustaleniu tych poziomów przyszedł czas na praktyczne zastosowanie. W naszym projekcie, co może być nietypowe, mieliśmy trzech Product Managerów (PM-ów). Celem było zrozumienie, który z nich odpowiada za dany proces – nie w sensie wykonawstwa, ale odpowiedzialności za kluczowe wskaźniki (KPI). Stworzyliśmy więc tabelę, która miała pomóc nam w przypisaniu odpowiednich poziomów krytyczności.</p> <p>Tabela składała się z:</p> <ul> <li> <p><strong>Nazwa procesu</strong> – na przykład "Onboarding - wypełnienie formularza" czy "Płatność - wprowadzenie PIN i realizacja".</p> </li> <li> <p><strong>PM</strong> – osoba odpowiedzialna za proces. Ważne było, aby nie mylić osoby, która wdrażała proces, z osobą, która odpowiada za jego wyniki. Ktoś mógł być zaangażowany w implementację, ale to nie oznacza, że jest odpowiedzialny za osiąganie KPI.</p> </li> <li> <p><strong>Krytyczność</strong> – jedno z czterech poziomów opisanych powyżej. Aby wesprzeć decyzje, wielokrotnie musieliśmy powtarzać przykłady typu: "Czy warto odchodzić od stołu w Wigilię?", "Czy muszę wstać o 3 w nocy w niedzielę?" albo "Czy to może poczekać do poniedziałku?" Ostatecznie chodziło o ustalenie priorytetów: "Który proces naprawić najpierw?"</p> </li> </ul> <p><span style="width:100%;margin:0.5em 0;text-align:center"> <img alt src="../static/biznesowe-sla-w-praktyce/criticality-table.jpg"> </span> </p> <p>To ćwiczenie okazało się trudne, dlatego warto przeprowadzać je w dwie osoby. Ja miałem przyjemność pracować z <a href="https://staffeng.com/guides/what-do-staff-engineers-actually-do/">PSE</a>, który był stosunkowo daleko od samego produktu. Dzięki temu wnosił świeżą perspektywę.</p> <p>Trzeba pamiętać również, że ustalone poziomy krytyczności nie są wyryte w kamieniu. To, co dziś jest priorytetem, może za kilka miesięcy stracić na znaczeniu. Kluczowe KPI mogą się zmieniać – na przykład na początku priorytetem jest masowe wpuszczanie użytkowników, a później dbanie o to, by faktycznie korzystali z usługi. Tabela ta to kontrakt między zespołem technicznym a biznesem. Dzięki niej możemy precyzyjnie ustalić, które alerty są krytyczne, a które mogą poczekać do poniedziałku. Jeśli coś ma status "standard" lub "wspierający", biznes bierze na siebie ryzyko, że ewentualne problemy zostaną rozwiązane później. Jeśli wyżej, biznes bierze na siebie koszt obsługi.</p> <h2 id="3-obsuga-niedostepnosci">3. Obsługa niedostępności<a class="headerlink" href="#3-obsuga-niedostepnosci" title="Permanent link">&para;</a></h2> <p><span style="float:right;width:32%;margin:0.4em 0 0.4em 0.4em"><img alt src="../static/biznesowe-sla-w-praktyce/handling.jpg"></span></p> <p>Po wyznaczeniu krytyczności procesów, następnym krokiem było opracowanie przejrzystych instrukcji zarządzania niedostępnościami. Chodziło o stworzenie zestawu zasad, które umożliwią podejmowanie decyzji opartych na danych, zamiast intuicji czy subiektywnych odczuć techników. Takie podejście eliminuje niejasności i pomaga w skutecznym reagowaniu na problemy.</p> <p><strong>Poziomy niedostępności</strong></p> <p>Aby efektywnie zarządzać incydentami, wdrożyliśmy trzy poziomy niedostępności:</p> <ul> <li> <p><strong>Całkowita niedostępność (P1)</strong>:</p> <ul> <li> <p><strong>Kryteria</strong>: Znaczący wpływ na system, przekraczający 25-50% ustalonego progu krytyczności. Dotknięte są kluczowe wskaźniki biznesowe, takie jak GMV, NPS lub KPI.</p> </li> <li> <p><strong>Działania</strong>: Natychmiastowa interwencja (np. uruchomienie <a href="https://martinfowler.com/articles/feature-toggles.html">kill switches</a>), z jednoczesnym wykonaniem procedur przypisanych do P2.</p> </li> </ul> </li> <li> <p><strong>Częściowa niedostępność (P2)</strong>:</p> <ul> <li> <p><strong>Kryteria</strong>: Problem przekracza próg krytyczności dla ważnych operacji biznesowych.</p> </li> <li> <p><strong>Działania</strong>: Analiza problemu, eskalacja, tworzenie zgłoszeń, wyświetlanie banerów informacyjnych, a następnie próba naprawy.</p> </li> </ul> </li> <li> <p><strong>Standardowe wsparcie (P3)</strong>:</p> <ul> <li> <p><strong>Kryteria</strong>: Problemy P2 obsługiwane w dni robocze.</p> </li> <li> <p><strong>Działania</strong>: Realizacja standardowych procedur.</p> </li> </ul> </li> </ul> <p>Podobnie jak przy wyznaczaniu krytyczności procesów, współpracowaliśmy z zespołem biznesowym, aby ustalić, kiedy i jak należy reagować. W trakcie tych rozmów przydatne okazały się pytania takie jak: „Czy możemy pozwolić sobie na 20% utraconych transakcji? Nie uważasz, że to duża strata?” lub „Czyli chcesz powiedzieć, że wystarczy 40% zaafektowanych procesów i już powinniśmy wyłączać funkcjonalność?”. Często sugerowaliśmy też alternatywę dla wyłączania funkcji, jak na przykład wyświetlanie banerów informacyjnych.</p> <p><span style="width:100%;margin:0.5em 0;text-align:center"> <img alt src="../static/biznesowe-sla-w-praktyce/handling-table.jpg"> </span> </p> <p><strong>Optymalizacja wykrywania problemów</strong></p> <p>Kolejnym kluczowym elementem było dostosowanie okien czasowych do wykrywania niedostępności, w zależności od natężenia ruchu. Przy dużym ruchu mogliśmy sobie pozwolić na krótsze okna czasowe (5-15 minut), co pozwalało na szybkie wykrywanie problemów. Jednak krótsze okna mogły także powodować fałszywe alarmy. Dla procesów wykorzystywanych przez mniejszą ilość użytkowników konieczne było wydłużenie okien (15-30 minut), aby uniknąć fluktuacji i zbędnych alertów. Początkowo testowaliśmy alerty na niskich progach, a następnie stopniowo je dostosowywaliśmy, monitorując na dedykowanym kanale.</p> <p><strong>Scenariusze działania</strong></p> <p>Po ustaleniu kryteriów P1 i P2 dla poszczególnych procesów, przeszliśmy do tworzenia scenariuszy działania. Oto kilka przykładów:</p> <ul> <li> <p>Onboarding P1: Użytkownicy nie mogą przejść do następnego ekranu.</p> </li> <li> <p>Payment P1: Użytkownicy nie mogą dokończyć płatności.</p> </li> <li> <p>Customer P1: Użytkownicy nie mogą zalogować się do panelu.</p> </li> </ul> <p>Dla każdego z tych przypadków stworzyliśmy procedury opisujące, jakie kroki należy podjąć w razie awarii. Procedury te były podzielone na dwie główne kategorie:</p> <ul> <li> <p><strong>Awaria</strong>: W takich przypadkach obsługa polegała na analizie, eskalacji, tworzeniu zgłoszeń, kontaktowaniu się z partnerami oraz, w niektórych przypadkach, wyświetlaniu banerów informacyjnych.</p> </li> <li> <p><strong>Niedostępność</strong>: W przypadku poważniejszych awarii, gdy problem wpływał na kluczowe wskaźniki, takie jak GMV czy NPS, wyłączaliśmy funkcjonalność całkowicie, a użytkownicy widzieli komunikat „Przepraszamy, coś poszło nie tak” lub przyciski były dezaktywowane (wyszarzone). Czasem wysyłaliśmy też wiadomości z informacją o problemie.</p> </li> </ul> <p>Aby usprawnić zarządzanie awariami i kontakt z partnerami, opracowaliśmy również polityki eskalacji dla kluczowych partnerów (vendor). Te dokumenty zawierały informacje o tym, kogo kontaktować, w jakiej kolejności, oraz co zrobić, jeśli partner nie odpowiada w określonym czasie (np. w ciągu 15 lub 30 minut).</p> <p><strong>Procedura działania</strong></p> <p>Typowa procedura zawierała następujące kroki:</p> <ol> <li> <p><strong>Sprawdzenie metryk KPI w Grafanie</strong> – Przegląd metryk w sekcji <em>Business SLA</em>, analiza wartości i identyfikacja odchyleń, które mogą wskazywać na problem. Sekcja ta zawierała również przykłady historycznych problemów.</p> </li> <li> <p><strong>Ocena sekcji Handling Unavailability</strong> – Wykresy krytyczności, które pokazują, czy należy wyłączyć proces. Wartości były przemnożone przez progowe wskaźniki krytyczności.</p> </li> <li> <p><strong>Podjęcie działań</strong> – Jeśli problem został sklasyfikowany jako P1, należało natychmiast zareagować. Dyżurny mógł wykorzystać <a href="https://martinfowler.com/articles/feature-toggles.html">feature flagi</a> do wyłączenia funkcjonalności i skonsultować się z zespołem w razie wątpliwości.</p> </li> <li> <p><strong>Weryfikacja</strong> – Po wyłączeniu należało zweryfikować czy użytkownicy nie mają już dostępu do problematycznej funkcji. Sekcja zawierała linki do narzędzi weryfikacyjnych, w tym statusu feature flag oraz zrzuty czego mogą oczekiwać klienci na swoich urządzeniach.</p> </li> <li> <p><strong>Kontynuacja procedury P2</strong> – Po zakończeniu incydentu informowaliśmy odpowiednie osoby, eskalowaliśmy sprawę, tworzyliśmy zgłoszenia i dalej zarządzaliśmy incydentem, aby minimalizować jego skutki.</p> </li> </ol> <p>Przygotowanie tych procedur było czasochłonne, ale ostatecznie stworzyliśmy szczegółowy dokument, który stał się narzędziem w zarządzaniu incydentami. Dzięki temu, zarówno nowi członkowie zespołu, jak i ci mniej zaznajomieni z danym procesem, mogą łatwo się odnaleźć w sytuacjach kryzysowych.</p> <p>Na koniec, naszym celem było również stworzenie jednego, przejrzystego widoku, który pozwala monitorować najważniejsze wskaźniki na jednym ekranie. Dziś nasza Grafana jest złożona, ale dzięki zagregowaniu krytycznych danych, możliwe jest szybkie zidentyfikowanie problemu i podjęcie odpowiednich działań.</p> <h2 id="4-raportowanie-sla">4. Raportowanie - SLA<a class="headerlink" href="#4-raportowanie-sla" title="Permanent link">&para;</a></h2> <p><span style="float:right;width:32%;margin:0.4em 0 0.4em 0.4em"><img alt src="../static/biznesowe-sla-w-praktyce/report.jpg"></span></p> <p>Ostatnim krokiem, który podjęliśmy, było wybranie procesów, które miały stać się podstawą rozliczania w całej organizacji. Można to porównać do tworzenia <strong>status page</strong> – narzędzia, które jasno pokazuje, jak usługi radzą sobie w czasie rzeczywistym. Wewnętrzne KPI są oczywiście ważne, ale potrzebowaliśmy czegoś, co zewnętrzny obserwator – zarówno partnerzy, jak i inżynierzy w innych zespołach – mógłby wykorzystać, aby ocenić, czy wszystko działa prawidłowo.</p> <p>Jako część dużej organizacji, mamy dostęp do scentralizowanego narzędzia do raportowania SLA. To narzędzie pozwala monitorować status usług, śledzić awarie i je analizować. Co ważne, umożliwia ono ustalenie, czy problem wynikał z naszych działań, czy może była to awaria u dostawcy. Mając takie dane, możemy negocjować lepsze warunki umów z partnerami i optymalizować koszty.</p> <p>Dla produktu wybraliśmy pięć kluczowych metryk, które najlepiej odzwierciedlają stan produktu. Odpowiadają one na pytania typu: „Czy proces może być zakończony?” albo „Czy metoda jest dostępna?”. Dzięki integracji z systemem raportowym mamy możliwość automatycznego mierzenia czasu przestojów, precyzyjnego określania momentów ich rozpoczęcia i zakończenia, poprawiania zakresów czasowych, zmiany poziomu problemów oraz wykluczania fałszywych alarmów.</p> <p><span style="width:100%;margin:0.5em 0;text-align:center"> <img alt src="../static/biznesowe-sla-w-praktyce/report-table.jpg"> </span> </p> <p><strong>Kto korzysta z tych raportów?</strong></p> <p>Raporty są kluczowym źródłem informacji dla liderów, dyrektorów oraz principal inżynierów. To one pokazują, gdzie warto inwestować w większą dostępność, które procesy są wąskimi gardłami oraz gdzie należy wdrożyć mechanizmy awaryjne. Stanowią nie tylko przegląd technicznych aspektów działania usług, ale mogą także mieć znaczenie polityczne w organizacji – jeśli większość awarii wynika z problemów u dostawcy, może to być znak, że warto rozważyć zmianę partnera.</p> <p><strong>Jak raportujemy?</strong></p> <p>W systemie raportowania SLA wyróżniliśmy trzy główne scenariusze:</p> <ol> <li> <p><strong>Niedostępność planowana</strong> – zaplanowane przerwy serwisowe dostawców (my nie mamy przerw technicznych).</p> <ul> <li>W takim przypadku dodajemy podsumowanie: „Ze względu na zaplanowane okno serwisowe partnera…”.</li> </ul> </li> <li> <p><strong>Niedostępność nieplanowana</strong> – lokalna awaria u dostawcy lub nasze.</p> <ul> <li>W raporcie pojawia się wpis typu: „Z powodu awarii (partnera)…”.</li> </ul> </li> <li> <p><strong>Fałszywy alarm (False positive)</strong> – przypadek, gdy alarm został wywołany błędnie.</p> <ul> <li>W takim przypadku korzystamy z opcji usunięcia (Remove this outage).</li> </ul> </li> </ol> <p>Zdarza się, że musimy ręcznie dostosowywać czas trwania przestojów, bo okna czasowe (15-30 minut) bywają zbyt szerokie i nie odzwierciedlają rzeczywistego czasu awarii.</p> <p>System raportowania pozwala także na wykluczenie przestojów z kalkulacji SLA dla konkretnej funkcji, a także z globalnego SLA organizacji. Możemy wysyłać powiadomienia e-mailowe, informować zespoły na Slacku, a także pokazywać straty <a href="https://en.wikipedia.org/wiki/Gross_merchandise_volume">GMV (Gross Merchandise Value)</a> i liczbę klientów, którzy potencjalnie nas opuścili w wyniku awarii. W przypadku zaplanowanych przerw technicznych publikujemy harmonogramy, dzięki czemu inne zespoły są wcześniej informowani o nadchodzących pracach serwisowych.</p> <p><strong>Kiedy wypełniamy raport?</strong></p> <p>Raporty są wypełniane po zakończeniu działań związanych z obsługą awarii. Mamy na to zazwyczaj siedem dni, więc nie ma presji czasu. Najlepiej wypełniać raporty po przygotowaniu <a href="https://www.atlassian.com/incident-management/postmortem#an-effective-incident-postmortem-plan">postmortem</a> i zebraniu wszystkich danych dotyczących incydentu.</p> <h2 id="kolejne-kroki-opcjonalne">Kolejne kroki (opcjonalne)<a class="headerlink" href="#kolejne-kroki-opcjonalne" title="Permanent link">&para;</a></h2> <p>Po wdrożeniu powyższego, warto pomyśleć o dodatkowych inicjatywach, które mogą usprawnić działanie systemu i zespołu:</p> <ol> <li> <p><strong>Error Budgeting</strong> – Określenie, ile awarii można zaakceptować w ramach SLO. To ułatwia zarządzanie niezawodnością bez hamowania rozwoju.</p> </li> <li> <p><strong>Zero Bug Policy</strong> – Brak znanych błędów w produkcji. Każdy problem jest naprawiany, zanim wpłynie na użytkowników.</p> </li> <li> <p><strong>Chaos Testing</strong> – Symulowanie awarii, aby sprawdzić, jak system radzi sobie w nieprzewidzianych sytuacjach.</p> </li> <li> <p><strong>Wykrywanie anomalii</strong> – Automatyczne monitorowanie systemu pod kątem odchyleń od normy i wczesne ostrzeganie o problemach.</p> </li> <li> <p><strong>Cotygodniowy przegląd systemu (WSR)</strong> – Regularna analiza metryk i incydentów, co pomaga w stałej optymalizacji procesów. Opisałem tę ceremonię w osobym artykule „<strong><a href="https://rafalschmidt.com/weekly-service-review/"><strong>Przepis na cotygodniowy przegląd usług</strong></a></strong>”.</p> </li> <li> <p><strong>Stop The Line Policy</strong> – Zasada, według której poważne incydenty wstrzymują inne działania, dopóki nie zostaną rozwiązane.</p> </li> </ol> <hr> <p>Mam nadzieję, że ten obszerny wpis pozwoli ci lepiej zrozumieć, jak podejść do tematu biznesowego SLA od strony technicznej. Przeszedłem przez cztery kluczowe kroki, które – jeśli dobrze wdrożone – mogą znacząco poprawić reakcje na incydenty i ułatwić ich zarządzanie. Liczę, że te wskazówki pomogą ci w codziennej pracy z SLA i pozwolą lepiej zbalansować potrzeby biznesowe z aspektami technicznymi.</p> <div class="md-source-file"> <hr> <small> Utworzony: 09.09.2024 </small> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight">© Rafał Schmidt 2025</div> </div> <div class="md-social"> <a href="https://linkedin.com/in/rafalschmidt/" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Skopiowano do schowka", "clipboard.copy": "Kopiuj do schowka", "search.result.more.one": "1 wi\u0119cej na tej stronie", "search.result.more.other": "# wi\u0119cej na tej stronie", "search.result.none": "Brak wynik\u00f3w wyszukiwania", "search.result.one": "Wyniki wyszukiwania: 1", "search.result.other": "Wyniki wyszukiwania: #", "search.result.placeholder": "Zacznij pisa\u0107, aby szuka\u0107", "search.result.term.missing": "Brak", "select.version": "Wybierz wersj\u0119"}}</script> <script src="../assets/javascripts/bundle.3220b9d7.min.js"></script> </body> </html>